# Installing KubeSlice

There are the five main steps for installing the KubeSlice:

- Installing the KubeSlice Controller
- Creating the project
- Registering the worker clusters
- Creating the slices
- Onboarding namespaces onto the slices

This topic describes the steps the add KubeSlice to your existing multi-cluster configuration.

## Adding KubeSlice to a Multi-Cluster Configuration
The Kubeslice Controller and worker clusters can be installed on your existing mutli-cluster configuration by using a topology configuration file. 

## Installing the KubeSlice Controller and Worker Clusters

You must create a topology configuration file that includes the names of the clusters, project name, and cluster contexts
that hosts the KubeSlice Controller and the worker clusters. For more information, see sample 
[topology configuration](/versioned_docs/version-0.x.0/kubeslice-cli/reference/sample-configuration-file.mdx) file.

Use the following command to install the controller and worker cluster:
```
kubeslice-cli install --config=<topology-configuration-file>
```
The above command installs the KubeSlice Controller, creates a project, and registers the worker cluster with a project by installing the Slice
Operator on the worker cluster.


## Onboarding Namespaces

To onboard your existing namespaces (and their applications) onto a slice, follow these steps:
- Create a slice definition file (choose the namespaces, clusters, etc to be part of the slice).
- Use the `kubeslice-cli create sliceConfig` command to apply the slice configuration file.


### Creating a Slice

Use the following template to create a slice.
:::info
To understand more about the configuration parameters, see [Slice Configuration Parameters](/versioned_docs/version-0.4.0/getting-started-with-cloud-clusters/installing-kubeslice/configuration-parameters.mdx#slice-configuration-parameters).
:::

```
apiVersion: controller.kubeslice.io/v1alpha1
kind: SliceConfig
metadata:
  name: <slice-name>                #The name of the slice
spec:  
  sliceSubnet: <slice-subnet>        #The slice subnet
  sliceType: Application
  sliceGatewayProvider:
    sliceGatewayType: OpenVPN
    sliceCaType: Local
  sliceIpamType: Local
  clusters:
  - <worker-cluster-name1>           #The name of your worker cluster1
  - <worker-cluster-name2>           #The name of your worker cluster2
  qosProfileDetails:
    queueType: HTB
    priority: 0
    tcType: BANDWIDTH_CONTROL
    bandwidthCeilingKbps: 30000
    bandwidthGuaranteedKbps: 20000
    dscpClass: AF11

```

### Applying the Slice Configuration YAML file

:::caution
The `kubeslice-cli create sliceConfig` command returns after the configuration is applied. However, in each cluster, the relevant pods for 
controlling and managing the slice may still be starting. Please wait for the slice to complete initialization before deploying services to it.
:::

To apply the slice configuration, use the following command:
```
kubeslice-cli create sliceConfig -n <project-namespace> -f <slice-configuration-yaml>
```
   
Example
```
kubeslice-cli create sliceConfig -n kubeslice-avesha -f slice-config.yaml
```
   
Example output
```
üèÉ Running command: /usr/local/bin/kubectl apply -f slice-config.yaml -n kubeslice-demo
sliceconfig.controller.kubeslice.io/slice-red created

Successfully Applied Slice Configuration.
```

## Deploying the Application
:::info
If the application is already deployed on a namespace that is onboarded to a slice, then re-deploy the application.
:::
To create a service export, use the following command:
```
kubeslice-cli create serviceExportConfig -f <service-export-yaml> -n <application-namespace>
```